{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelSelect as _vModelSelect, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-b6ff649e\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Please register a Worker!\", -1 /* HOISTED */));\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Username:\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Password:\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Confirm Password:\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Name:\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Last Name:\", -1 /* HOISTED */));\nconst _hoisted_11 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Gender:\", -1 /* HOISTED */));\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"Male\"\n}, \"Male\", -1 /* HOISTED */));\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"Female\"\n}, \"Female\", -1 /* HOISTED */));\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"Other\"\n}, \"Other\", -1 /* HOISTED */));\nconst _hoisted_16 = [_hoisted_13, _hoisted_14, _hoisted_15];\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Date of Birth:\", -1 /* HOISTED */));\nconst _hoisted_18 = {\n  key: 0,\n  class: \"error\"\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Register\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"form\", {\n    onSubmit: _withModifiers($setup.register, [\"prevent\"]),\n    class: \"register-form\"\n  }, [_hoisted_1, _createElementVNode(\"div\", null, [_hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n    placeholder: \"Username\",\n    onBlur: $setup.validateUsername\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.username]]), $setup.errors.username ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString($setup.errors.username), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n    onInput: $setup.validatePassword\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.password]]), $setup.errors.password ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString($setup.errors.password), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.confirmPassword = $event),\n    onInput: $setup.validatePassword\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.confirmPassword]]), $setup.errors.confirmPassword ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, _toDisplayString($setup.errors.confirmPassword), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.name = $event),\n    placeholder: \"Name\",\n    onBlur: $setup.validateName\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.name]]), $setup.errors.name ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, _toDisplayString($setup.errors.name), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.lastName = $event),\n    placeholder: \"Lastname\",\n    onBlur: $setup.validateLastName\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.lastName]]), $setup.errors.lastName ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, _toDisplayString($setup.errors.lastName), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_hoisted_12, _withDirectives(_createElementVNode(\"select\", {\n    name: \"gender\",\n    id: \"gender\",\n    form: \"gender\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.gender = $event)\n  }, [..._hoisted_16], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.gender]])]), _createElementVNode(\"div\", null, [_hoisted_17, _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.birthDate = $event),\n    onBlur: $setup.validateBirthDate\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $setup.birthDate]]), $setup.errors.birthDate ? (_openBlock(), _createElementBlock(\"span\", _hoisted_18, _toDisplayString($setup.errors.birthDate), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _hoisted_19], 32 /* NEED_HYDRATION */);\n}","map":{"version":3,"names":["_createElementVNode","key","class","value","_hoisted_13","_hoisted_14","_hoisted_15","type","_createElementBlock","onSubmit","_withModifiers","$setup","register","_hoisted_1","_hoisted_2","_cache","$event","username","placeholder","onBlur","validateUsername","errors","_hoisted_3","_toDisplayString","_createCommentVNode","_hoisted_4","password","onInput","validatePassword","_hoisted_5","_hoisted_6","confirmPassword","_hoisted_7","_hoisted_8","name","validateName","_hoisted_9","_hoisted_10","lastName","validateLastName","_hoisted_11","_hoisted_12","id","form","gender","_hoisted_16","_hoisted_17","birthDate","validateBirthDate","_hoisted_18","_hoisted_19"],"sources":["C:\\FTN\\treca\\drugi_sem\\veb\\chocolate-factoryapp\\Frontend\\front-app\\src\\components\\RegisterWorker.vue"],"sourcesContent":["<template>\r\n  <form @submit.prevent=\"register\" class=\"register-form\">\r\n    <h2>Please register a Worker!</h2>\r\n    <div>\r\n      <label>Username:</label>\r\n      <input type=\"text\" v-model=\"username\" placeholder=\"Username\" @blur=\"validateUsername\"/>\r\n      <span v-if=\"errors.username\" class=\"error\">{{ errors.username }}</span>\r\n    </div>\r\n    <div>\r\n      <label>Password:</label>\r\n      <input type=\"password\" v-model=\"password\" @input=\"validatePassword\"/>\r\n      <span v-if=\"errors.password\" class=\"error\">{{ errors.password }}</span>\r\n    </div>\r\n    <div>\r\n      <label>Confirm Password:</label>\r\n      <input type=\"password\" v-model=\"confirmPassword\" @input=\"validatePassword\"/>\r\n      <span v-if=\"errors.confirmPassword\" class=\"error\">{{ errors.confirmPassword }}</span>\r\n    </div>\r\n    <div>\r\n      <label>Name:</label>\r\n      <input type=\"text\" v-model=\"name\" placeholder=\"Name\" @blur=\"validateName\"/>\r\n      <span v-if=\"errors.name\" class=\"error\">{{ errors.name }}</span>\r\n    </div>\r\n    <div>\r\n      <label>Last Name:</label>\r\n      <input type=\"text\" v-model=\"lastName\" placeholder=\"Lastname\" @blur=\"validateLastName\"/>\r\n      <span v-if=\"errors.lastName\" class=\"error\">{{ errors.lastName }}</span>\r\n    </div>\r\n    <div>\r\n      <label>Gender:</label>\r\n      <select name=\"gender\" id=\"gender\" form=\"gender\" v-model=\"gender\">\r\n        <option value=\"Male\">Male</option>\r\n        <option value=\"Female\">Female</option>\r\n        <option value=\"Other\">Other</option>\r\n      </select>\r\n    </div>\r\n    <div>\r\n      <label>Date of Birth:</label>\r\n      <input type=\"date\" v-model=\"birthDate\" @blur=\"validateBirthDate\"/>\r\n      <span v-if=\"errors.birthDate\" class=\"error\">{{ errors.birthDate }}</span>\r\n    </div>\r\n    <button type=\"submit\">Register</button>\r\n  </form>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\nconst username = ref('');\r\nconst password = ref('');\r\nconst confirmPassword = ref('');\r\nconst name = ref('');\r\nconst lastName = ref('');\r\nconst gender = ref('Male');\r\nconst birthDate = ref('');\r\nconst worksAtFactoryId = ref('');\r\nconst errors = ref({});\r\n\r\nconst token = store.state.token; // Get token from the store\r\n\r\nconst payload = JSON.parse(atob(token.split('.')[1]));\r\nconst userId = payload.userId;\r\nconst userRole = payload.role;\r\n\r\nonMounted(() => {\r\n  loadFactory();\r\n});\r\n\r\nfunction loadFactory() {\r\n  axios.get(`http://localhost:3001/api/factories/manager/${userId}`)\r\n    .then(response => {\r\n      worksAtFactoryId.value = response.data.id;\r\n    })\r\n    .catch(error => {\r\n      console.error('There was an error fetching the factories!', error);\r\n    });\r\n}\r\n\r\nfunction validateUsername() {\r\n  if (!username.value) {\r\n    errors.value.username = 'Username is required';\r\n  } else {\r\n    errors.value.username = '';\r\n  }\r\n}\r\n\r\nfunction validatePassword() {\r\n  if (!password.value) {\r\n    errors.value.password = 'Password is required';\r\n  } else if (password.value !== confirmPassword.value) {\r\n    errors.value.confirmPassword = 'Passwords do not match';\r\n  } else {\r\n    errors.value.password = '';\r\n    errors.value.confirmPassword = '';\r\n  }\r\n}\r\n\r\nfunction validateName() {\r\n  if (!name.value) {\r\n    errors.value.name = 'Name is required';\r\n  } else {\r\n    errors.value.name = '';\r\n  }\r\n}\r\n\r\nfunction validateLastName() {\r\n  if (!lastName.value) {\r\n    errors.value.lastName = 'Last Name is required';\r\n  } else {\r\n    errors.value.lastName = '';\r\n  }\r\n}\r\n\r\nfunction validateBirthDate() {\r\n  if (!birthDate.value) {\r\n    errors.value.birthDate = 'Date of Birth is required';\r\n  } else {\r\n    errors.value.birthDate = '';\r\n  }\r\n}\r\n\r\nfunction register() {\r\n  validateUsername();\r\n  validatePassword();\r\n  validateName();\r\n  validateLastName();\r\n  validateBirthDate();\r\n\r\n  if (\r\n    errors.value.username ||\r\n    errors.value.password ||\r\n    errors.value.confirmPassword ||\r\n    errors.value.name ||\r\n    errors.value.lastName ||\r\n    errors.value.birthDate\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  const userToRegister = {\r\n    username: username.value,\r\n    password: password.value,\r\n    name: name.value,\r\n    lastName: lastName.value,\r\n    gender: gender.value,\r\n    birthDate: birthDate.value,\r\n    worksAtFactoryId: worksAtFactoryId.value\r\n  };\r\n\r\n  axios.post(`http://localhost:3001/api/signupworker`, userToRegister)\r\n    .then(response => {\r\n      router.push('/login');\r\n    })\r\n    .catch(error => {\r\n      if (error.response && error.response.data.error === 'Username already exists') {\r\n        errors.value.username = 'Username already taken';\r\n      } else {\r\n        console.error('There was an error registering!', error);\r\n      }\r\n    });\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-form {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 10px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.register-form h2 {\r\n  text-align: center;\r\n  color: #4b3832;\r\n  font-family: 'Arial', sans-serif;\r\n  font-size: 2em;\r\n  font-weight: bold;\r\n  margin-bottom: 20px;\r\n  text-transform: uppercase;\r\n  font-style: italic;\r\n}\r\n\r\n.register-form div {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.register-form label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: bold;\r\n}\r\n\r\n.register-form input,\r\n.register-form select {\r\n  width: 100%;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n}\r\n\r\n.register-form button {\r\n  display: block;\r\n  width: 100%;\r\n  padding: 10px;\r\n  background-color: #42b983;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 1em;\r\n}\r\n\r\n.register-form button:hover {\r\n  background-color: #3a9d70;\r\n}\r\n\r\n.error {\r\n  color: red;\r\n  font-size: 0.8em;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}