{"ast":null,"code":"/**\r\n * @module ol/style/Icon\r\n */\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport { asArray } from '../color.js';\nimport { assert } from '../asserts.js';\nimport { get as getIconImage } from './IconImage.js';\nimport { getUid } from '../util.js';\n\n/**\r\n * @typedef {'fraction' | 'pixels'} IconAnchorUnits\r\n * Anchor unit can be either a fraction of the icon size or in pixels.\r\n */\n\n/**\r\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} IconOrigin\r\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\r\n */\n\n/**\r\n * @typedef {Object} Options\r\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\r\n * @property {IconOrigin} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\r\n * `top-left` or `top-right`.\r\n * @property {IconAnchorUnits} [anchorXUnits='fraction'] Units in which the anchor x value is\r\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\r\n * the x value in pixels.\r\n * @property {IconAnchorUnits} [anchorYUnits='fraction'] Units in which the anchor y value is\r\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\r\n * the y value in pixels.\r\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\r\n * the icon will be left as is.\r\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\r\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\r\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\r\n * @property {HTMLImageElement|HTMLCanvasElement|ImageBitmap} [img] Image object for the icon.\r\n * @property {Array<number>} [displacement=[0, 0]] Displacement of the icon in pixels.\r\n * Positive values will shift the icon right and up.\r\n * @property {number} [opacity=1] Opacity of the icon.\r\n * @property {number} [width] The width of the icon in pixels. This can't be used together with `scale`.\r\n * @property {number} [height] The height of the icon in pixels. This can't be used together with `scale`.\r\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\r\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\r\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\r\n * @property {Array<number>} [offset=[0, 0]] Offset which, together with `size` and `offsetOrigin`, defines the\r\n * sub-rectangle to use from the original (sprite) image.\r\n * @property {IconOrigin} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\r\n * `top-left` or `top-right`.\r\n * @property {import(\"../size.js\").Size} [size] Icon size in pixels. Used together with `offset` to define the\r\n * sub-rectangle to use from the original (sprite) image.\r\n * @property {string} [src] Image source URI.\r\n * @property {import(\"./Style.js\").DeclutterMode} [declutterMode] Declutter mode.\r\n */\n\n/**\r\n * @param {number} width The width.\r\n * @param {number} height The height.\r\n * @param {number|undefined} wantedWidth The wanted width.\r\n * @param {number|undefined} wantedHeight The wanted height.\r\n * @return {number|Array<number>} The scale.\r\n */\nfunction calculateScale(width, height, wantedWidth, wantedHeight) {\n  if (wantedWidth !== undefined && wantedHeight !== undefined) {\n    return [wantedWidth / width, wantedHeight / height];\n  }\n  if (wantedWidth !== undefined) {\n    return wantedWidth / width;\n  }\n  if (wantedHeight !== undefined) {\n    return wantedHeight / height;\n  }\n  return 1;\n}\n\n/**\r\n * @classdesc\r\n * Set icon style for vector features.\r\n * @api\r\n */\nclass Icon extends ImageStyle {\n  /**\r\n   * @param {Options} [options] Options.\r\n   */\n  constructor(options) {\n    options = options || {};\n\n    /**\r\n     * @type {number}\r\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\r\n     * @type {number}\r\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\r\n     * @type {number|import(\"../size.js\").Size}\r\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\r\n     * @type {boolean}\r\n     */\n    const rotateWithView = options.rotateWithView !== undefined ? options.rotateWithView : false;\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      displacement: options.displacement !== undefined ? options.displacement : [0, 0],\n      rotateWithView: rotateWithView,\n      declutterMode: options.declutterMode\n    });\n\n    /**\r\n     * @private\r\n     * @type {Array<number>}\r\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\r\n     * @private\r\n     * @type {Array<number>}\r\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\r\n     * @private\r\n     * @type {IconOrigin}\r\n     */\n    this.anchorOrigin_ = options.anchorOrigin !== undefined ? options.anchorOrigin : 'top-left';\n\n    /**\r\n     * @private\r\n     * @type {IconAnchorUnits}\r\n     */\n    this.anchorXUnits_ = options.anchorXUnits !== undefined ? options.anchorXUnits : 'fraction';\n\n    /**\r\n     * @private\r\n     * @type {IconAnchorUnits}\r\n     */\n    this.anchorYUnits_ = options.anchorYUnits !== undefined ? options.anchorYUnits : 'fraction';\n\n    /**\r\n     * @private\r\n     * @type {?string}\r\n     */\n    this.crossOrigin_ = options.crossOrigin !== undefined ? options.crossOrigin : null;\n    const image = options.img !== undefined ? options.img : null;\n    let cacheKey = options.src;\n    assert(!(cacheKey !== undefined && image), '`image` and `src` cannot be provided at the same time');\n    if ((cacheKey === undefined || cacheKey.length === 0) && image) {\n      cacheKey = /** @type {HTMLImageElement} */image.src || getUid(image);\n    }\n    assert(cacheKey !== undefined && cacheKey.length > 0, 'A defined and non-empty `src` or `image` must be provided');\n    assert(!((options.width !== undefined || options.height !== undefined) && options.scale !== undefined), '`width` or `height` cannot be provided together with `scale`');\n    let imageState;\n    if (options.src !== undefined) {\n      imageState = ImageState.IDLE;\n    } else if (image !== undefined) {\n      if ('complete' in image) {\n        if (image.complete) {\n          imageState = image.src ? ImageState.LOADED : ImageState.IDLE;\n        } else {\n          imageState = ImageState.LOADING;\n        }\n      } else {\n        imageState = ImageState.LOADED;\n      }\n    }\n\n    /**\r\n     * @private\r\n     * @type {import(\"../color.js\").Color}\r\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\r\n     * @private\r\n     * @type {import(\"./IconImage.js\").default}\r\n     */\n    this.iconImage_ = getIconImage(image, /** @type {string} */cacheKey, this.crossOrigin_, imageState, this.color_);\n\n    /**\r\n     * @private\r\n     * @type {Array<number>}\r\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n    /**\r\n     * @private\r\n     * @type {IconOrigin}\r\n     */\n    this.offsetOrigin_ = options.offsetOrigin !== undefined ? options.offsetOrigin : 'top-left';\n\n    /**\r\n     * @private\r\n     * @type {Array<number>}\r\n     */\n    this.origin_ = null;\n\n    /**\r\n     * @private\r\n     * @type {import(\"../size.js\").Size}\r\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n    /**\r\n     * Calculate the scale if width or height were given.\r\n     */\n    if (options.width !== undefined || options.height !== undefined) {\n      let width, height;\n      if (options.size) {\n        [width, height] = options.size;\n      } else {\n        const image = this.getImage(1);\n        if (image.width && image.height) {\n          width = image.width;\n          height = image.height;\n        } else if (image instanceof HTMLImageElement) {\n          this.initialOptions_ = options;\n          const onload = () => {\n            this.unlistenImageChange(onload);\n            if (!this.initialOptions_) {\n              return;\n            }\n            const imageSize = this.iconImage_.getSize();\n            this.setScale(calculateScale(imageSize[0], imageSize[1], options.width, options.height));\n          };\n          this.listenImageChange(onload);\n          return;\n        }\n      }\n      if (width !== undefined) {\n        this.setScale(calculateScale(width, height, options.width, options.height));\n      }\n    }\n  }\n\n  /**\r\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\r\n   * @return {Icon} The cloned style.\r\n   * @api\r\n   */\n  clone() {\n    let scale, width, height;\n    if (this.initialOptions_) {\n      width = this.initialOptions_.width;\n      height = this.initialOptions_.height;\n    } else {\n      scale = this.getScale();\n      scale = Array.isArray(scale) ? scale.slice() : scale;\n    }\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      color: this.color_ && this.color_.slice ? this.color_.slice() : this.color_ || undefined,\n      crossOrigin: this.crossOrigin_,\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      opacity: this.getOpacity(),\n      rotateWithView: this.getRotateWithView(),\n      rotation: this.getRotation(),\n      scale,\n      width,\n      height,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      src: this.getSrc(),\n      displacement: this.getDisplacement().slice(),\n      declutterMode: this.getDeclutterMode()\n    });\n  }\n\n  /**\r\n   * Get the anchor point in pixels. The anchor determines the center point for the\r\n   * symbolizer.\r\n   * @return {Array<number>} Anchor.\r\n   * @api\r\n   */\n  getAnchor() {\n    let anchor = this.normalizedAnchor_;\n    if (!anchor) {\n      anchor = this.anchor_;\n      const size = this.getSize();\n      if (this.anchorXUnits_ == 'fraction' || this.anchorYUnits_ == 'fraction') {\n        if (!size) {\n          return null;\n        }\n        anchor = this.anchor_.slice();\n        if (this.anchorXUnits_ == 'fraction') {\n          anchor[0] *= size[0];\n        }\n        if (this.anchorYUnits_ == 'fraction') {\n          anchor[1] *= size[1];\n        }\n      }\n      if (this.anchorOrigin_ != 'top-left') {\n        if (!size) {\n          return null;\n        }\n        if (anchor === this.anchor_) {\n          anchor = this.anchor_.slice();\n        }\n        if (this.anchorOrigin_ == 'top-right' || this.anchorOrigin_ == 'bottom-right') {\n          anchor[0] = -anchor[0] + size[0];\n        }\n        if (this.anchorOrigin_ == 'bottom-left' || this.anchorOrigin_ == 'bottom-right') {\n          anchor[1] = -anchor[1] + size[1];\n        }\n      }\n      this.normalizedAnchor_ = anchor;\n    }\n    const displacement = this.getDisplacement();\n    const scale = this.getScaleArray();\n    // anchor is scaled by renderer but displacement should not be scaled\n    // so divide by scale here\n    return [anchor[0] - displacement[0] / scale[0], anchor[1] + displacement[1] / scale[1]];\n  }\n\n  /**\r\n   * Set the anchor point. The anchor determines the center point for the\r\n   * symbolizer.\r\n   *\r\n   * @param {Array<number>} anchor Anchor.\r\n   * @api\r\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\r\n   * Get the icon color.\r\n   * @return {import(\"../color.js\").Color} Color.\r\n   * @api\r\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\r\n   * Get the image icon.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @return {HTMLImageElement|HTMLCanvasElement|ImageBitmap} Image or Canvas element. If the Icon\r\n   * style was configured with `src` or with a not let loaded `img`, an `ImageBitmap` will be returned.\r\n   * @api\r\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\r\n   * Get the pixel ratio.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @return {number} The pixel ratio of the image.\r\n   * @api\r\n   */\n  getPixelRatio(pixelRatio) {\n    return this.iconImage_.getPixelRatio(pixelRatio);\n  }\n\n  /**\r\n   * @return {import(\"../size.js\").Size} Image size.\r\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\r\n   * @return {import(\"../ImageState.js\").default} Image state.\r\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\r\n   * @return {HTMLImageElement|HTMLCanvasElement|ImageBitmap} Image element.\r\n   */\n  getHitDetectionImage() {\n    return this.iconImage_.getHitDetectionImage();\n  }\n\n  /**\r\n   * Get the origin of the symbolizer.\r\n   * @return {Array<number>} Origin.\r\n   * @api\r\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n    if (this.offsetOrigin_ != 'top-left') {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (this.offsetOrigin_ == 'top-right' || this.offsetOrigin_ == 'bottom-right') {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (this.offsetOrigin_ == 'bottom-left' || this.offsetOrigin_ == 'bottom-right') {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\r\n   * Get the image URL.\r\n   * @return {string|undefined} Image src.\r\n   * @api\r\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\r\n   * Get the size of the icon (in pixels).\r\n   * @return {import(\"../size.js\").Size} Image size.\r\n   * @api\r\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\r\n   * Get the width of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\r\n   * @return {number} Icon width (in pixels).\r\n   * @api\r\n   */\n  getWidth() {\n    const scale = this.getScaleArray();\n    if (this.size_) {\n      return this.size_[0] * scale[0];\n    }\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\n      return this.iconImage_.getSize()[0] * scale[0];\n    }\n    return undefined;\n  }\n\n  /**\r\n   * Get the height of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\r\n   * @return {number} Icon height (in pixels).\r\n   * @api\r\n   */\n  getHeight() {\n    const scale = this.getScaleArray();\n    if (this.size_) {\n      return this.size_[1] * scale[1];\n    }\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\n      return this.iconImage_.getSize()[1] * scale[1];\n    }\n    return undefined;\n  }\n\n  /**\r\n   * Set the scale.\r\n   *\r\n   * @param {number|import(\"../size.js\").Size} scale Scale.\r\n   * @api\r\n   */\n  setScale(scale) {\n    delete this.initialOptions_;\n    super.setScale(scale);\n  }\n\n  /**\r\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\r\n   */\n  listenImageChange(listener) {\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\n  }\n\n  /**\r\n   * Load not yet loaded URI.\r\n   * When rendering a feature with an icon style, the vector renderer will\r\n   * automatically call this method. However, you might want to call this\r\n   * method yourself for preloading or other purposes.\r\n   * @api\r\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\r\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\r\n   */\n  unlistenImageChange(listener) {\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n  }\n  ready() {\n    return this.iconImage_.ready();\n  }\n}\nexport default Icon;","map":{"version":3,"names":["EventType","ImageState","ImageStyle","asArray","assert","get","getIconImage","getUid","calculateScale","width","height","wantedWidth","wantedHeight","undefined","Icon","constructor","options","opacity","rotation","scale","rotateWithView","displacement","declutterMode","anchor_","anchor","normalizedAnchor_","anchorOrigin_","anchorOrigin","anchorXUnits_","anchorXUnits","anchorYUnits_","anchorYUnits","crossOrigin_","crossOrigin","image","img","cacheKey","src","length","imageState","IDLE","complete","LOADED","LOADING","color_","color","iconImage_","offset_","offset","offsetOrigin_","offsetOrigin","origin_","size_","size","getImage","HTMLImageElement","initialOptions_","onload","unlistenImageChange","imageSize","getSize","setScale","listenImageChange","clone","getScale","Array","isArray","slice","getOpacity","getRotateWithView","getRotation","getSrc","getDisplacement","getDeclutterMode","getAnchor","getScaleArray","setAnchor","getColor","pixelRatio","getPixelRatio","getImageSize","getImageState","getHitDetectionImage","getOrigin","iconImageSize","getWidth","getHeight","listener","addEventListener","CHANGE","load","removeEventListener","ready"],"sources":["C:/Programiranje/veb/projekat/chocolate-factoryapp/Frontend/front-app/node_modules/ol/style/Icon.js"],"sourcesContent":["/**\r\n * @module ol/style/Icon\r\n */\r\nimport EventType from '../events/EventType.js';\r\nimport ImageState from '../ImageState.js';\r\nimport ImageStyle from './Image.js';\r\nimport {asArray} from '../color.js';\r\nimport {assert} from '../asserts.js';\r\nimport {get as getIconImage} from './IconImage.js';\r\nimport {getUid} from '../util.js';\r\n\r\n/**\r\n * @typedef {'fraction' | 'pixels'} IconAnchorUnits\r\n * Anchor unit can be either a fraction of the icon size or in pixels.\r\n */\r\n\r\n/**\r\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} IconOrigin\r\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\r\n */\r\n\r\n/**\r\n * @typedef {Object} Options\r\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\r\n * @property {IconOrigin} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\r\n * `top-left` or `top-right`.\r\n * @property {IconAnchorUnits} [anchorXUnits='fraction'] Units in which the anchor x value is\r\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\r\n * the x value in pixels.\r\n * @property {IconAnchorUnits} [anchorYUnits='fraction'] Units in which the anchor y value is\r\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\r\n * the y value in pixels.\r\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\r\n * the icon will be left as is.\r\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\r\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\r\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\r\n * @property {HTMLImageElement|HTMLCanvasElement|ImageBitmap} [img] Image object for the icon.\r\n * @property {Array<number>} [displacement=[0, 0]] Displacement of the icon in pixels.\r\n * Positive values will shift the icon right and up.\r\n * @property {number} [opacity=1] Opacity of the icon.\r\n * @property {number} [width] The width of the icon in pixels. This can't be used together with `scale`.\r\n * @property {number} [height] The height of the icon in pixels. This can't be used together with `scale`.\r\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\r\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\r\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\r\n * @property {Array<number>} [offset=[0, 0]] Offset which, together with `size` and `offsetOrigin`, defines the\r\n * sub-rectangle to use from the original (sprite) image.\r\n * @property {IconOrigin} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\r\n * `top-left` or `top-right`.\r\n * @property {import(\"../size.js\").Size} [size] Icon size in pixels. Used together with `offset` to define the\r\n * sub-rectangle to use from the original (sprite) image.\r\n * @property {string} [src] Image source URI.\r\n * @property {import(\"./Style.js\").DeclutterMode} [declutterMode] Declutter mode.\r\n */\r\n\r\n/**\r\n * @param {number} width The width.\r\n * @param {number} height The height.\r\n * @param {number|undefined} wantedWidth The wanted width.\r\n * @param {number|undefined} wantedHeight The wanted height.\r\n * @return {number|Array<number>} The scale.\r\n */\r\nfunction calculateScale(width, height, wantedWidth, wantedHeight) {\r\n  if (wantedWidth !== undefined && wantedHeight !== undefined) {\r\n    return [wantedWidth / width, wantedHeight / height];\r\n  }\r\n  if (wantedWidth !== undefined) {\r\n    return wantedWidth / width;\r\n  }\r\n  if (wantedHeight !== undefined) {\r\n    return wantedHeight / height;\r\n  }\r\n  return 1;\r\n}\r\n\r\n/**\r\n * @classdesc\r\n * Set icon style for vector features.\r\n * @api\r\n */\r\nclass Icon extends ImageStyle {\r\n  /**\r\n   * @param {Options} [options] Options.\r\n   */\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    /**\r\n     * @type {number}\r\n     */\r\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\r\n\r\n    /**\r\n     * @type {number}\r\n     */\r\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\r\n\r\n    /**\r\n     * @type {number|import(\"../size.js\").Size}\r\n     */\r\n    const scale = options.scale !== undefined ? options.scale : 1;\r\n\r\n    /**\r\n     * @type {boolean}\r\n     */\r\n    const rotateWithView =\r\n      options.rotateWithView !== undefined ? options.rotateWithView : false;\r\n\r\n    super({\r\n      opacity: opacity,\r\n      rotation: rotation,\r\n      scale: scale,\r\n      displacement:\r\n        options.displacement !== undefined ? options.displacement : [0, 0],\r\n      rotateWithView: rotateWithView,\r\n      declutterMode: options.declutterMode,\r\n    });\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array<number>}\r\n     */\r\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array<number>}\r\n     */\r\n    this.normalizedAnchor_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {IconOrigin}\r\n     */\r\n    this.anchorOrigin_ =\r\n      options.anchorOrigin !== undefined ? options.anchorOrigin : 'top-left';\r\n\r\n    /**\r\n     * @private\r\n     * @type {IconAnchorUnits}\r\n     */\r\n    this.anchorXUnits_ =\r\n      options.anchorXUnits !== undefined ? options.anchorXUnits : 'fraction';\r\n\r\n    /**\r\n     * @private\r\n     * @type {IconAnchorUnits}\r\n     */\r\n    this.anchorYUnits_ =\r\n      options.anchorYUnits !== undefined ? options.anchorYUnits : 'fraction';\r\n\r\n    /**\r\n     * @private\r\n     * @type {?string}\r\n     */\r\n    this.crossOrigin_ =\r\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\r\n\r\n    const image = options.img !== undefined ? options.img : null;\r\n\r\n    let cacheKey = options.src;\r\n\r\n    assert(\r\n      !(cacheKey !== undefined && image),\r\n      '`image` and `src` cannot be provided at the same time',\r\n    );\r\n\r\n    if ((cacheKey === undefined || cacheKey.length === 0) && image) {\r\n      cacheKey = /** @type {HTMLImageElement} */ (image).src || getUid(image);\r\n    }\r\n    assert(\r\n      cacheKey !== undefined && cacheKey.length > 0,\r\n      'A defined and non-empty `src` or `image` must be provided',\r\n    );\r\n\r\n    assert(\r\n      !(\r\n        (options.width !== undefined || options.height !== undefined) &&\r\n        options.scale !== undefined\r\n      ),\r\n      '`width` or `height` cannot be provided together with `scale`',\r\n    );\r\n\r\n    let imageState;\r\n    if (options.src !== undefined) {\r\n      imageState = ImageState.IDLE;\r\n    } else if (image !== undefined) {\r\n      if ('complete' in image) {\r\n        if (image.complete) {\r\n          imageState = image.src ? ImageState.LOADED : ImageState.IDLE;\r\n        } else {\r\n          imageState = ImageState.LOADING;\r\n        }\r\n      } else {\r\n        imageState = ImageState.LOADED;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * @private\r\n     * @type {import(\"../color.js\").Color}\r\n     */\r\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {import(\"./IconImage.js\").default}\r\n     */\r\n    this.iconImage_ = getIconImage(\r\n      image,\r\n      /** @type {string} */ (cacheKey),\r\n      this.crossOrigin_,\r\n      imageState,\r\n      this.color_,\r\n    );\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array<number>}\r\n     */\r\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\r\n    /**\r\n     * @private\r\n     * @type {IconOrigin}\r\n     */\r\n    this.offsetOrigin_ =\r\n      options.offsetOrigin !== undefined ? options.offsetOrigin : 'top-left';\r\n\r\n    /**\r\n     * @private\r\n     * @type {Array<number>}\r\n     */\r\n    this.origin_ = null;\r\n\r\n    /**\r\n     * @private\r\n     * @type {import(\"../size.js\").Size}\r\n     */\r\n    this.size_ = options.size !== undefined ? options.size : null;\r\n\r\n    /**\r\n     * Calculate the scale if width or height were given.\r\n     */\r\n    if (options.width !== undefined || options.height !== undefined) {\r\n      let width, height;\r\n      if (options.size) {\r\n        [width, height] = options.size;\r\n      } else {\r\n        const image = this.getImage(1);\r\n        if (image.width && image.height) {\r\n          width = image.width;\r\n          height = image.height;\r\n        } else if (image instanceof HTMLImageElement) {\r\n          this.initialOptions_ = options;\r\n          const onload = () => {\r\n            this.unlistenImageChange(onload);\r\n            if (!this.initialOptions_) {\r\n              return;\r\n            }\r\n            const imageSize = this.iconImage_.getSize();\r\n            this.setScale(\r\n              calculateScale(\r\n                imageSize[0],\r\n                imageSize[1],\r\n                options.width,\r\n                options.height,\r\n              ),\r\n            );\r\n          };\r\n          this.listenImageChange(onload);\r\n          return;\r\n        }\r\n      }\r\n      if (width !== undefined) {\r\n        this.setScale(\r\n          calculateScale(width, height, options.width, options.height),\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\r\n   * @return {Icon} The cloned style.\r\n   * @api\r\n   */\r\n  clone() {\r\n    let scale, width, height;\r\n    if (this.initialOptions_) {\r\n      width = this.initialOptions_.width;\r\n      height = this.initialOptions_.height;\r\n    } else {\r\n      scale = this.getScale();\r\n      scale = Array.isArray(scale) ? scale.slice() : scale;\r\n    }\r\n    return new Icon({\r\n      anchor: this.anchor_.slice(),\r\n      anchorOrigin: this.anchorOrigin_,\r\n      anchorXUnits: this.anchorXUnits_,\r\n      anchorYUnits: this.anchorYUnits_,\r\n      color:\r\n        this.color_ && this.color_.slice\r\n          ? this.color_.slice()\r\n          : this.color_ || undefined,\r\n      crossOrigin: this.crossOrigin_,\r\n      offset: this.offset_.slice(),\r\n      offsetOrigin: this.offsetOrigin_,\r\n      opacity: this.getOpacity(),\r\n      rotateWithView: this.getRotateWithView(),\r\n      rotation: this.getRotation(),\r\n      scale,\r\n      width,\r\n      height,\r\n      size: this.size_ !== null ? this.size_.slice() : undefined,\r\n      src: this.getSrc(),\r\n      displacement: this.getDisplacement().slice(),\r\n      declutterMode: this.getDeclutterMode(),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the anchor point in pixels. The anchor determines the center point for the\r\n   * symbolizer.\r\n   * @return {Array<number>} Anchor.\r\n   * @api\r\n   */\r\n  getAnchor() {\r\n    let anchor = this.normalizedAnchor_;\r\n    if (!anchor) {\r\n      anchor = this.anchor_;\r\n      const size = this.getSize();\r\n      if (\r\n        this.anchorXUnits_ == 'fraction' ||\r\n        this.anchorYUnits_ == 'fraction'\r\n      ) {\r\n        if (!size) {\r\n          return null;\r\n        }\r\n        anchor = this.anchor_.slice();\r\n        if (this.anchorXUnits_ == 'fraction') {\r\n          anchor[0] *= size[0];\r\n        }\r\n        if (this.anchorYUnits_ == 'fraction') {\r\n          anchor[1] *= size[1];\r\n        }\r\n      }\r\n\r\n      if (this.anchorOrigin_ != 'top-left') {\r\n        if (!size) {\r\n          return null;\r\n        }\r\n        if (anchor === this.anchor_) {\r\n          anchor = this.anchor_.slice();\r\n        }\r\n        if (\r\n          this.anchorOrigin_ == 'top-right' ||\r\n          this.anchorOrigin_ == 'bottom-right'\r\n        ) {\r\n          anchor[0] = -anchor[0] + size[0];\r\n        }\r\n        if (\r\n          this.anchorOrigin_ == 'bottom-left' ||\r\n          this.anchorOrigin_ == 'bottom-right'\r\n        ) {\r\n          anchor[1] = -anchor[1] + size[1];\r\n        }\r\n      }\r\n      this.normalizedAnchor_ = anchor;\r\n    }\r\n    const displacement = this.getDisplacement();\r\n    const scale = this.getScaleArray();\r\n    // anchor is scaled by renderer but displacement should not be scaled\r\n    // so divide by scale here\r\n    return [\r\n      anchor[0] - displacement[0] / scale[0],\r\n      anchor[1] + displacement[1] / scale[1],\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Set the anchor point. The anchor determines the center point for the\r\n   * symbolizer.\r\n   *\r\n   * @param {Array<number>} anchor Anchor.\r\n   * @api\r\n   */\r\n  setAnchor(anchor) {\r\n    this.anchor_ = anchor;\r\n    this.normalizedAnchor_ = null;\r\n  }\r\n\r\n  /**\r\n   * Get the icon color.\r\n   * @return {import(\"../color.js\").Color} Color.\r\n   * @api\r\n   */\r\n  getColor() {\r\n    return this.color_;\r\n  }\r\n\r\n  /**\r\n   * Get the image icon.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @return {HTMLImageElement|HTMLCanvasElement|ImageBitmap} Image or Canvas element. If the Icon\r\n   * style was configured with `src` or with a not let loaded `img`, an `ImageBitmap` will be returned.\r\n   * @api\r\n   */\r\n  getImage(pixelRatio) {\r\n    return this.iconImage_.getImage(pixelRatio);\r\n  }\r\n\r\n  /**\r\n   * Get the pixel ratio.\r\n   * @param {number} pixelRatio Pixel ratio.\r\n   * @return {number} The pixel ratio of the image.\r\n   * @api\r\n   */\r\n  getPixelRatio(pixelRatio) {\r\n    return this.iconImage_.getPixelRatio(pixelRatio);\r\n  }\r\n\r\n  /**\r\n   * @return {import(\"../size.js\").Size} Image size.\r\n   */\r\n  getImageSize() {\r\n    return this.iconImage_.getSize();\r\n  }\r\n\r\n  /**\r\n   * @return {import(\"../ImageState.js\").default} Image state.\r\n   */\r\n  getImageState() {\r\n    return this.iconImage_.getImageState();\r\n  }\r\n\r\n  /**\r\n   * @return {HTMLImageElement|HTMLCanvasElement|ImageBitmap} Image element.\r\n   */\r\n  getHitDetectionImage() {\r\n    return this.iconImage_.getHitDetectionImage();\r\n  }\r\n\r\n  /**\r\n   * Get the origin of the symbolizer.\r\n   * @return {Array<number>} Origin.\r\n   * @api\r\n   */\r\n  getOrigin() {\r\n    if (this.origin_) {\r\n      return this.origin_;\r\n    }\r\n    let offset = this.offset_;\r\n\r\n    if (this.offsetOrigin_ != 'top-left') {\r\n      const size = this.getSize();\r\n      const iconImageSize = this.iconImage_.getSize();\r\n      if (!size || !iconImageSize) {\r\n        return null;\r\n      }\r\n      offset = offset.slice();\r\n      if (\r\n        this.offsetOrigin_ == 'top-right' ||\r\n        this.offsetOrigin_ == 'bottom-right'\r\n      ) {\r\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\r\n      }\r\n      if (\r\n        this.offsetOrigin_ == 'bottom-left' ||\r\n        this.offsetOrigin_ == 'bottom-right'\r\n      ) {\r\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\r\n      }\r\n    }\r\n    this.origin_ = offset;\r\n    return this.origin_;\r\n  }\r\n\r\n  /**\r\n   * Get the image URL.\r\n   * @return {string|undefined} Image src.\r\n   * @api\r\n   */\r\n  getSrc() {\r\n    return this.iconImage_.getSrc();\r\n  }\r\n\r\n  /**\r\n   * Get the size of the icon (in pixels).\r\n   * @return {import(\"../size.js\").Size} Image size.\r\n   * @api\r\n   */\r\n  getSize() {\r\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\r\n  }\r\n\r\n  /**\r\n   * Get the width of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\r\n   * @return {number} Icon width (in pixels).\r\n   * @api\r\n   */\r\n  getWidth() {\r\n    const scale = this.getScaleArray();\r\n    if (this.size_) {\r\n      return this.size_[0] * scale[0];\r\n    }\r\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\r\n      return this.iconImage_.getSize()[0] * scale[0];\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Get the height of the icon (in pixels). Will return undefined when the icon image is not yet loaded.\r\n   * @return {number} Icon height (in pixels).\r\n   * @api\r\n   */\r\n  getHeight() {\r\n    const scale = this.getScaleArray();\r\n    if (this.size_) {\r\n      return this.size_[1] * scale[1];\r\n    }\r\n    if (this.iconImage_.getImageState() == ImageState.LOADED) {\r\n      return this.iconImage_.getSize()[1] * scale[1];\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Set the scale.\r\n   *\r\n   * @param {number|import(\"../size.js\").Size} scale Scale.\r\n   * @api\r\n   */\r\n  setScale(scale) {\r\n    delete this.initialOptions_;\r\n    super.setScale(scale);\r\n  }\r\n\r\n  /**\r\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\r\n   */\r\n  listenImageChange(listener) {\r\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\r\n  }\r\n\r\n  /**\r\n   * Load not yet loaded URI.\r\n   * When rendering a feature with an icon style, the vector renderer will\r\n   * automatically call this method. However, you might want to call this\r\n   * method yourself for preloading or other purposes.\r\n   * @api\r\n   */\r\n  load() {\r\n    this.iconImage_.load();\r\n  }\r\n\r\n  /**\r\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\r\n   */\r\n  unlistenImageChange(listener) {\r\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\r\n  }\r\n\r\n  ready() {\r\n    return this.iconImage_.ready();\r\n  }\r\n}\r\n\r\nexport default Icon;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}