{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios';\nimport { useStore } from 'vuex';\nexport default {\n  __name: 'Cart',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const cart = ref({\n      chocolates: [],\n      totalPrice: 0\n    });\n    onMounted(() => {\n      loadCart();\n    });\n    function loadCart() {\n      const userId = store.getters.userId;\n      axios.get(`http://localhost:3001/api/cart/${userId}`).then(response => {\n        cart.value = response.data;\n      }).catch(error => {\n        console.error('Error fetching cart:', error);\n      });\n    }\n    function removeFromCart(chocolateId) {\n      const userId = store.getters.userId;\n      axios.post('http://localhost:3001/api/cart/remove', {\n        userId,\n        chocolateId\n      }).then(response => {\n        cart.value = response.data;\n      }).catch(error => {\n        console.error('Error removing chocolate from cart:', error);\n      });\n    }\n    function clearCart() {\n      const userId = store.getters.userId;\n      axios.post(`http://localhost:3001/api/cart/clear/${userId}`).then(response => {\n        cart.value = response.data;\n      }).catch(error => {\n        console.error('Error clearing cart:', error);\n      });\n    }\n    function createPurchase() {\n      const userId = store.getters.userId;\n      axios.post('http://localhost:3001/api/purchases', {\n        userId\n      }, {\n        headers: {\n          'Authorization': `Bearer ${store.state.token}`\n        }\n      }).then(response => {\n        console.log('Purchase created:', response.data);\n        alert('Purchase successfully created.');\n        loadCart();\n      }).catch(error => {\n        console.error('Error creating purchase:', error);\n        alert('Failed to create purchase.');\n      });\n    }\n    function getChocolatePictureUrl(path) {\n      return `http://localhost:3001/images/${path}`;\n    }\n    const __returned__ = {\n      store,\n      cart,\n      loadCart,\n      removeFromCart,\n      clearCart,\n      createPurchase,\n      getChocolatePictureUrl,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      get useStore() {\n        return useStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","useStore","store","cart","chocolates","totalPrice","loadCart","userId","getters","get","then","response","value","data","catch","error","console","removeFromCart","chocolateId","post","clearCart","createPurchase","headers","state","token","log","alert","getChocolatePictureUrl","path"],"sources":["C:/FTN/treca/drugi_sem/veb/chocolate-factoryapp/Frontend/front-app/src/components/Cart.vue"],"sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n    <h1>Your Cart</h1>\r\n    <div v-if=\"cart.chocolates.length > 0\">\r\n      <ul>\r\n        <li v-for=\"item in cart.chocolates\" :key=\"item.chocolate.id\" class=\"cart-item\">\r\n          <img :src=\"getChocolatePictureUrl(item.chocolate.picturePath)\" :alt=\"item.chocolate.name\" class=\"chocolate-picture\" />\r\n          <div class=\"cart-details\">\r\n            <h3>{{ item.chocolate.name }}</h3>\r\n            <p>Type: {{ item.chocolate.chocolateType }}</p>\r\n            <p>Variety: {{ item.chocolate.chocolateVariety }}</p>\r\n            <p>Price: {{ item.chocolate.price }}</p>\r\n            <p>Quantity: {{ item.quantity }}</p>\r\n            <button @click=\"removeFromCart(item.chocolate.id)\">Remove</button>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n      <p>Total Price: {{ cart.totalPrice }}</p>\r\n      <button @click=\"clearCart\">Clear Cart</button>\r\n      <button @click=\"createPurchase\">Purchase</button>\r\n    </div>\r\n    <p v-else>Your cart is empty.</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { useStore } from 'vuex';\r\n\r\nconst store = useStore();\r\nconst cart = ref({\r\n  chocolates: [],\r\n  totalPrice: 0\r\n});\r\n\r\nonMounted(() => {\r\n  loadCart();\r\n});\r\n\r\nfunction loadCart() {\r\n  const userId = store.getters.userId;\r\n  axios.get(`http://localhost:3001/api/cart/${userId}`)\r\n    .then(response => {\r\n      cart.value = response.data;\r\n    })\r\n    .catch(error => {\r\n      console.error('Error fetching cart:', error);\r\n    });\r\n}\r\n\r\nfunction removeFromCart(chocolateId) {\r\n  const userId = store.getters.userId;\r\n  axios.post('http://localhost:3001/api/cart/remove', { userId, chocolateId })\r\n    .then(response => {\r\n      cart.value = response.data;\r\n    })\r\n    .catch(error => {\r\n      console.error('Error removing chocolate from cart:', error);\r\n    });\r\n}\r\n\r\nfunction clearCart() {\r\n  const userId = store.getters.userId;\r\n  axios.post(`http://localhost:3001/api/cart/clear/${userId}`)\r\n    .then(response => {\r\n      cart.value = response.data;\r\n    })\r\n    .catch(error => {\r\n      console.error('Error clearing cart:', error);\r\n    });\r\n}\r\n\r\nfunction createPurchase() {\r\n  const userId = store.getters.userId;\r\n  axios.post('http://localhost:3001/api/purchases', { userId }, {\r\n    headers: {\r\n      'Authorization': `Bearer ${store.state.token}`\r\n    }\r\n  })\r\n    .then(response => {\r\n      console.log('Purchase created:', response.data);\r\n      alert('Purchase successfully created.');\r\n      loadCart();  \r\n    })\r\n    .catch(error => {\r\n      console.error('Error creating purchase:', error);\r\n      alert('Failed to create purchase.');\r\n    });\r\n}\r\n\r\nfunction getChocolatePictureUrl(path) {\r\n  return `http://localhost:3001/images/${path}`;\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cart {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 10px;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n}\r\n.cart-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 20px 0;\r\n  border: 1px solid #000;\r\n  padding: 10px;\r\n  border-radius: 8px;\r\n  position: relative;\r\n}\r\n.chocolate-picture {\r\n  width: 100px;\r\n  height: auto;\r\n  margin-right: 20px;\r\n}\r\n.cart-details {\r\n  flex-grow: 1;\r\n}\r\n</style>\r\n"],"mappings":"AA0BA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,MAAM;;;;;;;IAE/B,MAAMC,KAAK,GAAGD,QAAQ,CAAC,CAAC;IACxB,MAAME,IAAI,GAAGL,GAAG,CAAC;MACfM,UAAU,EAAE,EAAE;MACdC,UAAU,EAAE;IACd,CAAC,CAAC;IAEFN,SAAS,CAAC,MAAM;MACdO,QAAQ,CAAC,CAAC;IACZ,CAAC,CAAC;IAEF,SAASA,QAAQA,CAAA,EAAG;MAClB,MAAMC,MAAM,GAAGL,KAAK,CAACM,OAAO,CAACD,MAAM;MACnCP,KAAK,CAACS,GAAG,CAAE,kCAAiCF,MAAO,EAAC,CAAC,CAClDG,IAAI,CAACC,QAAQ,IAAI;QAChBR,IAAI,CAACS,KAAK,GAAGD,QAAQ,CAACE,IAAI;MAC5B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C,CAAC,CAAC;IACN;IAEA,SAASE,cAAcA,CAACC,WAAW,EAAE;MACnC,MAAMX,MAAM,GAAGL,KAAK,CAACM,OAAO,CAACD,MAAM;MACnCP,KAAK,CAACmB,IAAI,CAAC,uCAAuC,EAAE;QAAEZ,MAAM;QAAEW;MAAY,CAAC,CAAC,CACzER,IAAI,CAACC,QAAQ,IAAI;QAChBR,IAAI,CAACS,KAAK,GAAGD,QAAQ,CAACE,IAAI;MAC5B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACD,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;MAC7D,CAAC,CAAC;IACN;IAEA,SAASK,SAASA,CAAA,EAAG;MACnB,MAAMb,MAAM,GAAGL,KAAK,CAACM,OAAO,CAACD,MAAM;MACnCP,KAAK,CAACmB,IAAI,CAAE,wCAAuCZ,MAAO,EAAC,CAAC,CACzDG,IAAI,CAACC,QAAQ,IAAI;QAChBR,IAAI,CAACS,KAAK,GAAGD,QAAQ,CAACE,IAAI;MAC5B,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C,CAAC,CAAC;IACN;IAEA,SAASM,cAAcA,CAAA,EAAG;MACxB,MAAMd,MAAM,GAAGL,KAAK,CAACM,OAAO,CAACD,MAAM;MACnCP,KAAK,CAACmB,IAAI,CAAC,qCAAqC,EAAE;QAAEZ;MAAO,CAAC,EAAE;QAC5De,OAAO,EAAE;UACP,eAAe,EAAG,UAASpB,KAAK,CAACqB,KAAK,CAACC,KAAM;QAC/C;MACF,CAAC,CAAC,CACCd,IAAI,CAACC,QAAQ,IAAI;QAChBK,OAAO,CAACS,GAAG,CAAC,mBAAmB,EAAEd,QAAQ,CAACE,IAAI,CAAC;QAC/Ca,KAAK,CAAC,gCAAgC,CAAC;QACvCpB,QAAQ,CAAC,CAAC;MACZ,CAAC,CAAC,CACDQ,KAAK,CAACC,KAAK,IAAI;QACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;QAChDW,KAAK,CAAC,4BAA4B,CAAC;MACrC,CAAC,CAAC;IACN;IAEA,SAASC,sBAAsBA,CAACC,IAAI,EAAE;MACpC,OAAQ,gCAA+BA,IAAK,EAAC;IAC/C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}