{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-8387779c\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"edit-amount\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Edit Chocolate Amount\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"amount\"\n}, \"Amount:\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Update Amount\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.updateAmount, [\"prevent\"])\n  }, [_createElementVNode(\"div\", null, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.amount = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.amount, void 0, {\n    number: true\n  }]])]), _hoisted_4], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_withModifiers","$setup","updateAmount","_hoisted_3","_cache","$event","amount","required","number","_hoisted_4"],"sources":["C:\\Programiranje\\veb\\projekat\\chocolate-factoryapp\\Frontend\\front-app\\src\\components\\EditAmount.vue"],"sourcesContent":["<template>\r\n  <div class=\"edit-amount\">\r\n    <h1>Edit Chocolate Amount</h1>\r\n    <form @submit.prevent=\"updateAmount\">\r\n      <div>\r\n        <label for=\"amount\">Amount:</label>\r\n        <input type=\"number\" v-model.number=\"amount\" required />\r\n      </div>\r\n      <button type=\"submit\">Update Amount</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport axios from 'axios';\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst amount = ref(0);\r\n\r\nonMounted(() => {\r\n  loadChocolate();\r\n});\r\n\r\nfunction loadChocolate() {\r\n  const chocolateId = route.params.id;\r\n  axios.get(`http://localhost:3001/api/chocolates/${chocolateId}`)\r\n    .then(response => {\r\n      amount.value = response.data.amount;\r\n    })\r\n    .catch(error => {\r\n      console.error('Error fetching chocolate details:', error);\r\n    });\r\n}\r\n\r\nfunction updateAmount() {\r\n  const chocolateId = route.params.id;\r\n  const token = localStorage.getItem('token'); // Ensure token is fetched from localStorage\r\n  axios.put(`http://localhost:3001/api/chocolates/${chocolateId}`, \r\n    { amount: amount.value },\r\n    {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    }\r\n  )\r\n    .then(() => {\r\n      router.push({ name: 'FactoryDetailed', params: { id: route.params.factoryId } });\r\n    })\r\n    .catch(error => {\r\n      console.error('Error updating amount:', error);\r\n    });\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.edit-amount {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAa;gEACtBC,mBAAA,CAA8B,YAA1B,uBAAqB;gEAGrBA,mBAAA,CAAmC;EAA5BC,GAAG,EAAC;AAAQ,GAAC,SAAO;gEAG7BD,mBAAA,CAA4C;EAApCE,IAAI,EAAC;AAAQ,GAAC,eAAa;;uBAPvCC,mBAAA,CASM,OATNC,UASM,GARJC,UAA8B,EAC9BL,mBAAA,CAMO;IANAM,QAAM,EAHjBC,cAAA,CAG2BC,MAAA,CAAAC,YAAY;MACjCT,mBAAA,CAGM,cAFJU,UAAmC,E,gBACnCV,mBAAA,CAAwD;IAAjDE,IAAI,EAAC,QAAQ;IAN5B,uBAAAS,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAM6CJ,MAAA,CAAAK,MAAM,GAAAD,MAAA;IAAEE,QAAQ,EAAR;iDAARN,MAAA,CAAAK,MAAM,E;IANnDE,MAAA,EAM6B;EAAuB,E,MAE9CC,UAA4C,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}