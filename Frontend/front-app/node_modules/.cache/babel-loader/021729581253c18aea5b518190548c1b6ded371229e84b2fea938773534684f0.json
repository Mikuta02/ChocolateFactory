{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-bf1681ae\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"profile-page\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"profile-info\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"User Profile\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Username:\", -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Name:\", -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Last Name:\", -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", null, \"Gender:\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  key: 1,\n  class: \"edit-profile\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Edit Profile\", -1 /* HOISTED */));\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\"\n}, \"Username:\", -1 /* HOISTED */));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"name\"\n}, \"Name:\", -1 /* HOISTED */));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"lastName\"\n}, \"Last Name:\", -1 /* HOISTED */));\nconst _hoisted_13 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"gender\"\n}, \"Gender:\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [!$setup.isEditing ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", null, [_hoisted_4, _createElementVNode(\"span\", null, _toDisplayString($setup.username), 1 /* TEXT */)]), _createElementVNode(\"div\", null, [_hoisted_5, _createElementVNode(\"span\", null, _toDisplayString($setup.name), 1 /* TEXT */)]), _createElementVNode(\"div\", null, [_hoisted_6, _createElementVNode(\"span\", null, _toDisplayString($setup.lastName), 1 /* TEXT */)]), _createElementVNode(\"div\", null, [_hoisted_7, _createElementVNode(\"span\", null, _toDisplayString($setup.gender), 1 /* TEXT */)]), _createElementVNode(\"button\", {\n    onClick: $setup.editProfile\n  }, \"Edit\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"div\", null, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.username]])]), _createElementVNode(\"div\", null, [_hoisted_11, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.name = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.name]])]), _createElementVNode(\"div\", null, [_hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"lastName\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.lastName = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.lastName]])]), _createElementVNode(\"div\", null, [_hoisted_13, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    id: \"gender\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.gender = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.gender]])]), _createElementVNode(\"button\", {\n    onClick: $setup.saveProfile\n  }, \"Save\"), _createElementVNode(\"button\", {\n    onClick: $setup.cancelEdit\n  }, \"Cancel\")]))]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","for","_createElementBlock","_hoisted_1","$setup","isEditing","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","username","_hoisted_5","name","_hoisted_6","lastName","_hoisted_7","gender","onClick","editProfile","_hoisted_8","_hoisted_9","_hoisted_10","type","id","_cache","$event","_hoisted_11","_hoisted_12","_hoisted_13","saveProfile","cancelEdit"],"sources":["C:\\FTN\\treca\\drugi_sem\\veb\\chocolate-factoryapp\\Frontend\\front-app\\src\\components\\Profile.vue"],"sourcesContent":["<template>\r\n    <div class=\"profile-page\">\r\n      <div class=\"profile-info\" v-if=\"!isEditing\">\r\n        <h2>User Profile</h2>\r\n        <div>\r\n          <label>Username:</label>\r\n          <span>{{ username }}</span>\r\n        </div>\r\n        <div>\r\n          <label>Name:</label>\r\n          <span>{{ name }}</span>\r\n        </div>\r\n        <div>\r\n          <label>Last Name:</label>\r\n          <span>{{ lastName }}</span>\r\n        </div>\r\n        <div>\r\n          <label>Gender:</label>\r\n          <span>{{ gender }}</span>\r\n        </div>\r\n        <button @click=\"editProfile\">Edit</button>\r\n      </div>\r\n      \r\n      <div class=\"edit-profile\" v-else>\r\n        <h2>Edit Profile</h2>\r\n        <div>\r\n          <label for=\"username\">Username:</label>\r\n          <input type=\"text\" id=\"username\" v-model=\"username\" />\r\n        </div>\r\n        <div>\r\n          <label for=\"name\">Name:</label>\r\n          <input type=\"text\" id=\"name\" v-model=\"name\" />\r\n        </div>\r\n        <div>\r\n          <label for=\"lastName\">Last Name:</label>\r\n          <input type=\"text\" id=\"lastName\" v-model=\"lastName\" />\r\n        </div>\r\n        <div>\r\n          <label for=\"gender\">Gender:</label>\r\n          <input type=\"text\" id=\"gender\" v-model=\"gender\" />\r\n        </div>\r\n        <button @click=\"saveProfile\">Save</button>\r\n        <button @click=\"cancelEdit\">Cancel</button>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref, onMounted } from 'vue';\r\n  import { useRouter } from 'vue-router';\r\n  import axios from 'axios';\r\n  import { useStore } from 'vuex';\r\n  \r\n  const store = useStore();\r\n  const router = useRouter();\r\n  const factories = ref([]);\r\n  const username = ref('');\r\n  const name = ref('');\r\n  const lastName = ref('');\r\n  const gender = ref('');\r\n  const isEditing = ref(false);\r\n  const token = store.state.token; // Get token from the store\r\n  \r\n  const payload = JSON.parse(atob(token.split('.')[1]));\r\n  const userId = payload.userId;\r\n  \r\n  onMounted(() => {\r\n    loadUser();\r\n  });\r\n  \r\n  function loadUser() {\r\n    axios.get(`http://localhost:3001/api/user/${userId}`)\r\n      .then(response => {\r\n        console.log('User fetched:', response.data);\r\n        username.value = response.data.username;\r\n        name.value = response.data.name;\r\n        lastName.value = response.data.lastName;\r\n        gender.value = response.data.gender;\r\n      })\r\n      .catch(error => {\r\n        console.error('There was an error fetching the user!', error);\r\n      });\r\n  }\r\n  \r\n  function editProfile() {\r\n    isEditing.value = true;\r\n  }\r\n  \r\n  function cancelEdit() {\r\n    isEditing.value = false;\r\n    loadUser(); // Reload user data to discard unsaved changes\r\n  }\r\n  \r\n  function saveProfile() {\r\n    axios.put(`http://localhost:3001/api/users/${userId}`, {\r\n      username: username.value,\r\n      name: name.value,\r\n      lastName: lastName.value,\r\n      gender: gender.value\r\n    })\r\n      .then(response => {\r\n        console.log('User updated:', response.data);\r\n        isEditing.value = false;\r\n      })\r\n      .catch(error => {\r\n        console.error('There was an error updating the user!', error);\r\n      });\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .profile-page {\r\n    max-width: 600px;\r\n    margin: 0 auto;\r\n    padding: 20px;\r\n    background-color: #f5f5f5;\r\n    border-radius: 10px;\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n  }\r\n  \r\n  .profile-page h2 {\r\n    text-align: center;\r\n    color: #4b3832;\r\n    font-family: 'Arial', sans-serif;\r\n    font-size: 2em;\r\n    font-weight: bold;\r\n    margin-bottom: 20px;\r\n    text-transform: uppercase; \r\n    font-style: italic;\r\n  }\r\n  \r\n  .profile-info div,\r\n  .edit-profile div {\r\n    margin-bottom: 15px;\r\n  }\r\n  \r\n  .profile-info label,\r\n  .edit-profile label {\r\n    display: block;\r\n    margin-bottom: 5px;\r\n    font-weight: bold;\r\n  }\r\n  \r\n  .profile-info span {\r\n    display: block;\r\n    padding: 8px;\r\n    background-color: #fff;\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n  }\r\n  \r\n  .edit-profile input {\r\n    width: 100%;\r\n    padding: 8px;\r\n    box-sizing: border-box;\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n  }\r\n  \r\n  .profile-info button,\r\n  .edit-profile button {\r\n    display: block;\r\n    width: 100%;\r\n    padding: 10px;\r\n    background-color: #42b983;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    font-size: 1em;\r\n    margin-top: 10px;\r\n  }\r\n  \r\n  .profile-info button:hover,\r\n  .edit-profile button:hover {\r\n    background-color: #3a9d70;\r\n  }\r\n  \r\n  .edit-profile button:last-child {\r\n    background-color: #d9534f;\r\n  }\r\n  \r\n  .edit-profile button:last-child:hover {\r\n    background-color: #c9302c;\r\n  }\r\n  </style>\r\n  "],"mappings":";;;EACSA,KAAK,EAAC;AAAc;;EAD7BC,GAAA;EAEWD,KAAK,EAAC;;gEACTE,mBAAA,CAAqB,YAAjB,cAAY;gEAEdA,mBAAA,CAAwB,eAAjB,WAAS;gEAIhBA,mBAAA,CAAoB,eAAb,OAAK;gEAIZA,mBAAA,CAAyB,eAAlB,YAAU;gEAIjBA,mBAAA,CAAsB,eAAf,SAAO;;EAjBxBD,GAAA;EAuBWD,KAAK,EAAC;;gEACTE,mBAAA,CAAqB,YAAjB,cAAY;iEAEdA,mBAAA,CAAuC;EAAhCC,GAAG,EAAC;AAAU,GAAC,WAAS;iEAI/BD,mBAAA,CAA+B;EAAxBC,GAAG,EAAC;AAAM,GAAC,OAAK;iEAIvBD,mBAAA,CAAwC;EAAjCC,GAAG,EAAC;AAAU,GAAC,YAAU;iEAIhCD,mBAAA,CAAmC;EAA5BC,GAAG,EAAC;AAAQ,GAAC,SAAO;;uBArCjCC,mBAAA,CA2CM,OA3CNC,UA2CM,G,CA1C6BC,MAAA,CAAAC,SAAS,I,cAA1CH,mBAAA,CAmBM,OAnBNI,UAmBM,GAlBJC,UAAqB,EACrBP,mBAAA,CAGM,cAFJQ,UAAwB,EACxBR,mBAAA,CAA2B,cAAAS,gBAAA,CAAlBL,MAAA,CAAAM,QAAQ,iB,GAEnBV,mBAAA,CAGM,cAFJW,UAAoB,EACpBX,mBAAA,CAAuB,cAAAS,gBAAA,CAAdL,MAAA,CAAAQ,IAAI,iB,GAEfZ,mBAAA,CAGM,cAFJa,UAAyB,EACzBb,mBAAA,CAA2B,cAAAS,gBAAA,CAAlBL,MAAA,CAAAU,QAAQ,iB,GAEnBd,mBAAA,CAGM,cAFJe,UAAsB,EACtBf,mBAAA,CAAyB,cAAAS,gBAAA,CAAhBL,MAAA,CAAAY,MAAM,iB,GAEjBhB,mBAAA,CAA0C;IAAjCiB,OAAK,EAAEb,MAAA,CAAAc;EAAW,GAAE,MAAI,E,oBAGnChB,mBAAA,CAoBM,OApBNiB,UAoBM,GAnBJC,UAAqB,EACrBpB,mBAAA,CAGM,cAFJqB,WAAuC,E,gBACvCrB,mBAAA,CAAsD;IAA/CsB,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,UAAU;IA3B1C,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA2BoDrB,MAAA,CAAAM,QAAQ,GAAAe,MAAA;iDAARrB,MAAA,CAAAM,QAAQ,E,KAEpDV,mBAAA,CAGM,cAFJ0B,WAA+B,E,gBAC/B1B,mBAAA,CAA8C;IAAvCsB,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,MAAM;IA/BtC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA+BgDrB,MAAA,CAAAQ,IAAI,GAAAa,MAAA;iDAAJrB,MAAA,CAAAQ,IAAI,E,KAE5CZ,mBAAA,CAGM,cAFJ2B,WAAwC,E,gBACxC3B,mBAAA,CAAsD;IAA/CsB,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,UAAU;IAnC1C,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAmCoDrB,MAAA,CAAAU,QAAQ,GAAAW,MAAA;iDAARrB,MAAA,CAAAU,QAAQ,E,KAEpDd,mBAAA,CAGM,cAFJ4B,WAAmC,E,gBACnC5B,mBAAA,CAAkD;IAA3CsB,IAAI,EAAC,MAAM;IAACC,EAAE,EAAC,QAAQ;IAvCxC,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAuCkDrB,MAAA,CAAAY,MAAM,GAAAS,MAAA;iDAANrB,MAAA,CAAAY,MAAM,E,KAEhDhB,mBAAA,CAA0C;IAAjCiB,OAAK,EAAEb,MAAA,CAAAyB;EAAW,GAAE,MAAI,GACjC7B,mBAAA,CAA2C;IAAlCiB,OAAK,EAAEb,MAAA,CAAA0B;EAAU,GAAE,QAAM,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}